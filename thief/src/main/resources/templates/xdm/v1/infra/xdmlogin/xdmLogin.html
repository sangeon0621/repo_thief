<!doctype html>
<html lang="ko">

	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Meta -->
		<meta name="description" content="Vivo - Responsive Bootstrap 5 Dashboard Template">
		<meta name="author" content="Bootstrap Gallery" />
		<link rel="canonical" href="https://www.bootstrap.gallery/">
		<meta property="og:url" content="https://www.bootstrap.gallery">
		<meta property="og:title" content="Admin Templates - Dashboard Templates | Bootstrap Gallery">
		<meta property="og:description" content="Marketplace for Bootstrap Admin Dashboards">
		<meta property="og:type" content="Website">
		<meta property="og:site_name" content="Bootstrap Gallery">
		<link rel="shortcut icon" href="/xdm/v1/template/vivo copy/assets/images/favicon.svg">

		<!-- Title -->
		<title>Vivo Admin Template - Admin Dashboard</title>


		<!-- *************
			************ Common Css Files *************
		************ -->

		<!-- Animated css -->
		<link rel="stylesheet" href="/xdm/v1/template/vivo copy/assets/css/animate.css">

		<!-- Bootstrap font icons css -->
		<link rel="stylesheet" href="/xdm/v1/template/vivo copy/assets/fonts/bootstrap/bootstrap-icons.css">

		<!-- Main css -->
		<link rel="stylesheet" href="/xdm/v1/template/vivo copy/assets/css/main.min.css">


	</head>

	<body class="login-container">

		<!-- Loading wrapper start -->
		<!-- <div id="loading-wrapper">
			<div class="spinner">
                <div class="line1"></div>
				<div class="line2"></div>
				<div class="line3"></div>
				<div class="line4"></div>
				<div class="line5"></div>
				<div class="line6"></div>
            </div>
		</div> -->
		<!-- Loading wrapper end -->

		<!-- Login box start -->
		<form id = "form" name = "form" method = "post" action = "/xdmLogin">
			<div class="login-box">
				<div class="login-form">
					<a href="index.html" class="login-logo">
						<img src="/xdm/v1/template/vivo copy/assets/images/logo.svg" alt="Vico Admin" />
					</a>
					<div class="login-welcome">
						관리자 로그인
					</div>
					<div class="mb-3">
							<label for="id" class="form-label">아이디</label>
							<input type="text" id="id" name="id" class="form-control" placeholder="영문,숫자 포함 6~12자 사이에 입력해주세요." autocomplete="off" required="">
							<div id="idError" class="text-danger" style="display: none;"></div>
					</div>
					<div class="mb-3">
						<div class="d-flex justify-content-between">
							<label class="form-label">비밀번호</label>
							<a href="forgot-password.html" class="btn-link ml-auto">비밀번호를 잊으셨나요?</a>
						</div>
						<input id="password" name="password" type="password" onkeyup="enterkey()" class="form-control">
						<div id="passwordError" class="text-danger" style="display: none;"></div>
					</div>
					<div class="login-form-actions">
						<button id="btnSubmit" type="button" class="btn"> <span class="icon"> <i class="bi bi-arrow-right-circle"></i> </span>
							로그인</button>
					</div>
					<div class="login-form-actions">
						<button type="submit" class="btn"> <img src="/xdm/v1/template/vivo copy/assets/images/google.svg" class="login-icon"
								alt="Login with Google">
							구글로 로그인</button>
						<button type="submit" class="btn"> <img src="/xdm/v1/template/vivo copy/assets/images/facebook.svg" class="login-icon"
								alt="Login with Facebook">
							페이스북으로 로그인</button>
					</div>
					<div class="login-form-footer">
						<div class="additional-link">
							회원이 아니신가요? <a href="/v1/infra/member/memberXdmRegister"> 회원가입</a>
						</div>
					</div>
				</div>
			</div>
			<div class="modals-placeholder">
                	<div class="modal fade" id="verticallyCentered"  tabindex="-1" aria-labelledby="verticallyCenteredLabel"
						aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verticallyCenteredLabel"></h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body" id="verticallyCenteredLabel2">
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primary" data-bs-dismiss="modal">닫기</button>
								</div>
							</div>
						</div>
					</div>
                </div>
		</form>
		<!-- Login box end -->

		<!-- *************
			************ Required JavaScript Files *************
		************* -->
		<!-- Required jQuery first, then Bootstrap Bundle JS -->
		<script src="/xdm/v1/template/vivo copy/assets/js/jquery.min.js"></script>
		<script src="/xdm/v1/template/vivo copy/assets/js/bootstrap.bundle.min.js"></script>
		<script src="/xdm/v1/template/vivo copy/assets/js/modernizr.js"></script>
		<script src="/xdm/v1/template/vivo copy/assets/js/moment.js"></script>

		<!-- *************
			************ Vendor Js Files *************
		************* -->

		<!-- Main Js Required -->
		<script src="/xdm/v1/template/vivo copy/assets/js/main.js"></script>
		
		<script type="text/javascript">
		document.getElementById("btnSubmit").onclick = function (){
			const id = document.getElementById("id");
			const idValue = document.getElementById("id").value.trim();
			const idError = document.getElementById("idError");
			
			var idRegExp = /^[a-zA-Z][0-9a-zA-Z]{5,11}$/;
			if(!idRegExp.test(idValue)){
				idError.innerText = "아이디 입력해주세요.";
				idError.style.display="";
				id.classList.add("is-invalid");
				id.classList.remove("is-valid");
				id.focus();
				return false;
		    } else {
		    	idError.style.display = "none";
		    	id.classList.remove("is-invalid");
		    	id.classList.add("is-valid");
		    }
			
// 			const password = document.getElementById("password");
// 			const passwordValue = document.getElementById("password").value.trim();
// 			const passwordError = document.getElementById("passwordError");
			
// 			var passwordRegExp = /^[a-zA-Z][0-9a-zA-Z]{7,11}$/;
// 			if(!passwordRegExp.test(passwordValue)){
// 				passwordError.innerText = "비밀번호 입력해주세요.";
// 				passwordError.style.display="";
// 				password.classList.add("is-invalid");
// 				password.classList.remove("is-valid");
// 				password.focus();
// 				return false;
// 		    } else {
// 		    	passwordError.style.display = "none";
// 		    	password.classList.remove("is-invalid");
// 		    	password.classList.add("is-valid");
// 		    }
			$.ajax({
				async: true 
				,cache: false
				,type: "post"
				/* ,dataType:"json" */
				,url: "/v1/infra/member/signinXdmProc"
				/* ,data : $("#formLogin").serialize() */
				,data : { "id" : $("#id").val(), "password" : $("#password").val()}
				,success: function(response) {
					if(response.rt == "success") {
						if(response.changePwd == "true") {
							location.href = "/v1/infra/member/memberXdmindex";
						} else {
							location.href = "/v1/infra/member/memberXdmindex";
						}
					} else {
				 		document.getElementById("verticallyCenteredLabel").innerText = "확 인";
				 		document.getElementById("verticallyCenteredLabel2").innerText = "일치하는 회원이 존재 하지 않습니다!";
				 		$("#verticallyCentered").modal("show");
					}
				}
				,error : function(jqXHR, textStatus, errorThrown){
					alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
				}
			});	
		}
		
		function enterkey() {
			if (window.event.keyCode == 13) {
		    	// 엔터키가 눌렸을 때
				$.ajax({
					async: true 
					,cache: false
					,type: "post"
					/* ,dataType:"json" */
					,url: "/v1/infra/member/signinXdmProc"
					/* ,data : $("#formLogin").serialize() */
					,data : { "id" : $("#id").val(), "password" : $("#password").val()}
					,success: function(response) {
						if(response.rt == "success") {
							if(response.changePwd == "true") {
								location.href = "/v1/infra/member/memberXdmindex";
							} else {
								location.href = "/v1/infra/member/memberXdmindex";
							}
						} else {
					 		document.getElementById("verticallyCenteredLabel").innerText = "확 인";
					 		document.getElementById("verticallyCenteredLabel2").innerText = "일치하는 회원이 존재 하지 않습니다!";
					 		$("#verticallyCentered").modal("show");
						}
					}
					,error : function(jqXHR, textStatus, errorThrown){
						alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
					}
				});
		    }
		}
		</script>

	</body>

</html>